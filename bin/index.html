<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>Google Maps JavaScript API Example</title>
    <script src="http://maps.google.com/maps?file=api&amp;v=3&amp"
      type="text/javascript"></script>
    

	
	<script type="text/javascript"> 

	var map;
  	var geocoder;
	var Lat,Lng;
	var addressDetails;
	Lat = -999;
	Lng = -999;
	Name = "";
	
	 
	function initialize()
	{
		  if (GBrowserIsCompatible()) 
		  {
  				map = new google.maps.Map(document.getElementById("map"));
                                var topRight = new GControlPosition(G_ANCHOR_TOP_RIGHT, new GSize(200,10));
				 map.addControl(new GSmallMapControl);
				 map.addControl(new GMapTypeControl,topRight);
				 geocoder = new GClientGeocoder();
				 map.setCenter( new GLatLng(0,0),1 );
				 GEvent.addListener(map, "click", getAddress);
				 
		  }
  
    	}

	function getAddress(overlay, latlng) {
		 
     		 if (latlng != null) {

     		   address = latlng;

       		 geocoder.getLocations(latlng, showAddress);

      		}

    	}
	function getName(){
		return addressDetails; 
	}
	function getlat(){
   	 return Lat;
	}
 
	function getlng(){
   	 return Lng;
	}
	function showAddress(response) {
		map.clearOverlays();
		if (!response || response.Status.code != 200) {
		alert("GoogleMap error:" + response.Status.code);
		} else {
		place = response.Placemark[0];
		point = new GLatLng(place.Point.coordinates[1],place.Point.coordinates[0]);
		marker = new GMarker(point);
		map.addOverlay(marker);
		marker.openInfoWindowHtml(
			'<b>Lat.,Long.:</b>' + place.Point.coordinates[1] + "," + place.Point.coordinates[0] + '<br>' +
			'<b>Address:</b>' + place.address + '<br>' +
			'<b>Country code:</b> ' + place.AddressDetails.Country.CountryNameCode);
		Lat = place.Point.coordinates[1];
		Lng = place.Point.coordinates[0];
		addressDetails = place.address;
		placeAddress = place.address;
		Name= place.AddressDetails.Country.AdmninistrativeArea.Locality;
		Map.setValues(Lat, Lng, Name);

		}
}
	function Open(x,y)
	{
     
 	var  point = new GLatLng(x,y);
        var bounds = new GLatLngBounds;
          
	  map.setCenter(point,13 );
	  marker = new GMarker(point);
	  bounds.extend(marker.getPoint());
	  map.addOverlay(marker);
	  map.setCenter(bounds.getCenter());
	}

    </script> 
	 

  </head>
  <body onload="initialize()" onunload="GUnload()"   topmargin="0" leftmargin="0">
    <div id="map" style="width:490px; height: 490px"> </div>
	
  </body>
</html>
