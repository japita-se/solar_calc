<!--DOCTYPE html-->
<html style="HEIGHT: 100%" xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<style type="text/css">
  html { height: 100% }
  body { height: 100%; margin: 0px; padding: 0px }
  #map_canvas { height: 100% }
</style>

<script type="text/javascript"
    src="http://maps.google.com/maps/api/js?sensor=true">
</script>

<script type="text/javascript">
  var geocoder;
  var map;
  var infowindow    = new google.maps.InfoWindow();
  var addressDetails ;
  var la,lo;
  var markersArray = [];
  function initialize() {
    var latlng = new google.maps.LatLng(40.35, 14.983333);
    var myOptions = {
      zoom: 10,
      panControl: true,
      zoomControl: true,
      scaleControl: true,
       mapTypeControl: true,
       mapTypeControlOptions: {
            style: google.maps.MapTypeControlStyle.DROPDOWN_MENU
          },
      center: latlng,
          disableDefaultUI: true,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
       map = new google.maps.Map(document.getElementById("map_canvas"),
        myOptions);
       geocoder = new google.maps.Geocoder();
       google.maps.event.addListener(map,"click",function(event){
               getAddress(event.latLng);
              
   });
 
}
  function getAddress(latlng)
  {
      
      if (infowindow) {
        infowindow.close();
      }
     clearO();
      geocoder.geocode({'latLng': latlng}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        if (results[1]) {
          map.setZoom(11);
          marker = new google.maps.Marker({
              position: latlng,
              map: map
                });
            }
          la = latlng.lat();
          lo = latlng.lng();
          infowindow.setContent(results[1].formatted_address);
          infowindow.open(map, marker);
          addressDetails = results[1].address_components;
         
           markersArray.push(marker);
          
        }
        else
            {
                alert("Google Error Code:"+status);
            }
      });
  }
 function getName(){
                 return addressDetails;
                //return city;
        }
 function getStreetName(){
                return street;
        }
 function getStateName(){
                return country;
        }
 function getLat(){
                return la;
        }
 function getLng(){
               return lo;
        } 
function clearO()
{
    if (markersArray) {
    for (i in markersArray) {
      markersArray[i].setMap(null);
    }
    markersArray.length = 0;
  }
}

function Open(x,y)
 {
        var  point =   new google.maps.LatLng(x,y);
        
        if (infowindow) 
            infowindow.close();
        map.setCenter(point,13 );
        marker = new google.maps.Marker({
              position: point,
              map: map
                });
         
         var bounds = new google.maps.LatLngBounds();
         bounds.extend(point);
        
         map.fitBounds(bounds);

 }
</script>
</head>
<body onload="initialize()">
  <div id="map_canvas" style="width:490px; height:490px"></div>
</body>
</html>
